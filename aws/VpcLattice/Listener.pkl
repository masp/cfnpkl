/// Creates a listener for a service. Before you start using your Amazon
/// VPC Lattice service, you must add one or more listeners. A listener is
/// a process that checks for connection requests to your services.
extends ".../AWS/Resource.pkl"
Type = "AWS::VpcLattice::Listener"
Properties: Props?
class Props {
    Arn: String(length <= 2048 && length >= 20 && matches(Regex(#"^arn(:[a-z0-9]+([.-][a-z0-9]+)*){2}(:([a-z0-9]+([.-][a-z0-9]+)*)?){2}:service/svc-[0-9a-z]{17}/listener/listener-[0-9a-z]{17}$"#)))?
    DefaultAction: DefaultAction?
    Id: String(length <= 26 && length >= 26 && matches(Regex(#"^listener-[0-9a-z]{17}$"#)))?
    Name: String(length <= 63 && length >= 3 && matches(Regex(#"^(?!listener-)(?![-])(?!.*[-]$)(?!.*[-]{2})[a-z0-9-]+$"#)))?
    Port: Int?
    Protocol: "HTTP" | "HTTPS" | *Null
    ServiceArn: String(length <= 2048 && length >= 21 && matches(Regex(#"^arn:[a-z0-9\-]+:vpc-lattice:[a-zA-Z0-9\-]+:\d{12}:service/svc-[0-9a-z]{17}$"#)))?
    ServiceId: String(length <= 21 && length >= 21 && matches(Regex(#"^svc-[0-9a-z]{17}$"#)))?
    ServiceIdentifier: String(length <= 2048 && length >= 21 && matches(Regex(#"^((svc-[0-9a-z]{17})|(arn:[a-z0-9\-]+:vpc-lattice:[a-zA-Z0-9\-]+:\d{12}:service/svc-[0-9a-z]{17}))$"#)))?
    Tags: Listing<Tag>?
}
class DefaultAction {
    Forward: Forward?
    FixedResponse: FixedResponse?
}
class Forward {
    TargetGroups: Listing<WeightedTargetGroup>
}
class WeightedTargetGroup {
    TargetGroupIdentifier: String(length <= 2048 && length >= 20 && matches(Regex(#"^((tg-[0-9a-z]{17})|(arn:[a-z0-9\-]+:vpc-lattice:[a-zA-Z0-9\-]+:\d{12}:targetgroup/tg-[0-9a-z]{17}))$"#)))
    Weight: Int?
}
class FixedResponse {
    StatusCode: Int
}
class Tag {
    Key: String(length <= 128 && length >= 1)
    Value: String(length <= 256 && length >= 1)
}
